<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visit Sri Lanka Pro</title>
    <style>
        :root { --primary: #1a73e8; --secondary: #ff9f43; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background: var(--bg); color: #333; overflow-x: hidden; }
        
        /* Splash Screen */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a73e8; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 2000;
            color: white; text-align: center; transition: opacity 0.5s ease;
        }
        .splash-title { font-size: 32px; font-weight: bold; margin-bottom: 20px; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }
        .loader { width: 120px; height: 4px; background: rgba(255,255,255,0.3); border-radius: 10px; overflow: hidden; }
        .progress { width: 0%; height: 100%; background: white; transition: width 0.05s linear; }

        /* Navbar */
        .navbar { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-size: 20px; font-weight: bold; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .nav-icons { display: flex; gap: 15px; }
        .nav-btn { background: #f0f2f5; border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer; text-decoration: none; color: #333; font-size: 14px; font-weight: 500; }

        /* Updated Search & Filter Section */
        .search-container { padding: 20px; background: white; }
        .search-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .search-bar { flex: 1; padding: 12px 20px; border-radius: 12px; border: 1px solid #ddd; outline: none; font-size: 16px; background: #f8f9fa; }
        .district-filter { padding: 10px; border-radius: 12px; border: 1px solid #ddd; background: white; font-size: 14px; outline: none; min-width: 130px; }

        /* Hero / Featured Slider */
        .hero { padding: 20px; overflow: hidden; }
        .featured-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; scroll-snap-type: x mandatory; scrollbar-width: none; }
        .featured-scroll::-webkit-scrollbar { display: none; }
        .featured-card { min-width: 280px; height: 180px; border-radius: 20px; position: relative; overflow: hidden; scroll-snap-align: start; box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        .featured-card img { width: 100%; height: 100%; object-fit: cover; }
        .featured-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; }

        /* Categories */
        .categories { display: flex; gap: 10px; overflow-x: auto; padding: 10px 20px; scrollbar-width: none; background: white; }
        .categories::-webkit-scrollbar { display: none; }
        .cat-btn { padding: 8px 20px; border-radius: 20px; border: none; background: #f0f2f5; white-space: nowrap; cursor: pointer; font-weight: 500; transition: 0.3s; }
        .cat-btn.active { background: var(--primary); color: white; }

        /* Grid */
        .content { padding: 20px; }
        .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.3s; position: relative; border: 1px solid #eee; }
        .card img { width: 100%; height: 120px; object-fit: cover; }
        .card-info { padding: 10px; }
        .card-info h3 { margin: 0; font-size: 14px; height: 40px; overflow: hidden; }
        .card-info p { margin: 5px 0 0; font-size: 12px; color: #777; }
        .view-btn { display: block; width: 100%; padding: 8px; margin-top: 10px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 12px; }

        /* Popup */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .popup-content { background: white; border-radius: 20px; max-width: 500px; margin: 0 auto; position: relative; overflow: hidden; }
        .popup-close { position: absolute; top: 15px; right: 15px; background: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; z-index: 10; }
        .popup-img { width: 100%; height: 250px; object-fit: cover; }
        .popup-body { padding: 20px; }
        .popup-title { font-size: 20px; font-weight: bold; margin-bottom: 10px; color: var(--primary); }
        .popup-meta { background: #f8f9fa; padding: 15px; border-radius: 12px; margin: 15px 0; font-size: 13px; line-height: 1.6; }
        .map-btn { display: flex; align-items: center; justify-content: center; gap: 10px; background: #34a853; color: white; padding: 12px; border-radius: 12px; text-decoration: none; font-weight: bold; margin-top: 15px; }

        #custom-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 25px; display: none; z-index: 3000; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="splash-title">Visit Sri Lanka üá±üá∞</div>
    <div class="loader"><div class="progress" id="progress"></div></div>
    <p style="margin-top: 15px; font-size: 14px; opacity: 0.8;">‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</p>
</div>

<div class="navbar">
    <div class="logo">Visit Sri Lanka üá±üá∞</div>
    <div class="nav-icons">
        <button class="nav-btn" onclick="toggleLang()" id="langBtn">SI</button>
    </div>
</div>

<div style="padding: 10px 20px; background: white; display: flex; gap: 10px; justify-content: center;">
    <a href="currency.html" class="nav-btn">üí∞ <span id="n2">Currency</span></a>
    <a href="weather.html" class="nav-btn">üå§Ô∏è <span id="n3">Weather</span></a>
</div>

<div class="search-container">
    <div class="search-row">
        <input type="text" id="search" class="search-bar" placeholder="‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±..." oninput="searchFn()">
        <select id="districtFilter" class="district-filter" onchange="searchFn()">
            <option value="all">‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂Ø‡∑í‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ä‡∂ö</option>
            <option value="Colombo">Colombo</option>
            <option value="Gampaha">Gampaha</option>
            <option value="Kalutara">Kalutara</option>
        </select>
    </div>
</div>

<div class="hero">
    <div class="section-title"><span id="catTitleSI">‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∑è ‡∂Ø‡∑ì‡∂∏‡∑ä</span></div>
    <div class="featured-scroll" id="featured-area"></div>
</div>

<div class="categories">
    <button class="cat-btn active" onclick="filterCat('all', this)" id="c0">All</button>
    <button class="cat-btn" onclick="filterCat('culture', this)" id="c1">Culture</button>
    <button class="cat-btn" onclick="filterCat('nature', this)" id="c2">Nature</button>
    <button class="cat-btn" onclick="filterCat('beach', this)" id="c3">Beach</button>
    <button class="cat-btn" onclick="filterCat('wildlife', this)" id="c4">Wildlife</button>
</div>

<div class="content">
    <div class="section-title"><span id="listTitleSI">‡∑É‡∂Ç‡∂†‡∑è‡∂ª‡∂ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±</span></div>
    <div id="location-grid" class="grid"></div>
</div>

<div id="details-popup" class="overlay">
    <div class="popup-content">
        <div class="popup-close" onclick="closePopups()">‚úï</div>
        <img id="p-img" class="popup-img" src="" alt="">
        <div class="popup-body">
            <div id="p-title" class="popup-title"></div>
            <div id="p-district" style="color: #666; font-size: 14px; margin-bottom: 10px;"></div>
            <div id="p-desc" style="line-height: 1.6; font-size: 15px;"></div>
            <div class="popup-meta">
                <strong>üìç <span id="loc-label">‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫:</span></strong> <span id="p-reach"></span><br>
                <strong>üéüÔ∏è ‡∂ß‡∑í‡∂ö‡∂ß‡∑ä‡∂¥‡∂≠‡∑ä:</strong> <span id="p-fee"></span><br>
                <strong>‚è∞ ‡∑Ñ‡∑ú‡∂≥‡∂∏ ‡∂ö‡∑è‡∂Ω‡∂∫:</strong> <span id="p-best"></span><br>
                <strong>‚ú® ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í ‡∂Ø‡∑ö:</strong> <span id="p-do"></span>
            </div>
            <div style="background: #fff3e0; padding: 12px; border-radius: 10px; font-size: 13px;">
                <strong id="contact-label">‡∑Ñ‡∂Ø‡∑í‡∑É‡∑í ‡∂Ö‡∂Ç‡∂ö üìû:</strong> <br>
                ‡∂¥‡∑ú‡∂Ω‡∑í‡∑É‡∑ä: <span id="p-police"></span>
            </div>
            <a id="p-map" href="#" target="_blank" class="map-btn">Google Map üìç</a>
        </div>
    </div>
</div>

<div id="custom-toast"></div>

<script src="translations.js"></script>
<script> var locations = []; </script>
<script src="western1.js"></script>
<script src="western2.js"></script>
<script src="western3.js"></script>
<script src="western4.js"></script>

<script>
    let currentLang = 'si';
    let currentCategory = 'all';

    window.onload = () => {
        let prog = document.getElementById('progress');
        let width = 0;
        let interval = setInterval(() => {
            width += 5;
            prog.style.width = width + '%';
            if(width >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    document.getElementById('splash-screen').style.opacity = '0';
                    setTimeout(() => { document.getElementById('splash-screen').style.display = 'none'; }, 500);
                }, 300);
            }
        }, 50);
        updateUI();
    };

    function toggleLang() {
        currentLang = currentLang === 'si' ? 'en' : 'si';
        document.getElementById('langBtn').innerText = currentLang === 'si' ? 'EN' : 'SI';
        updateUI();
    }

    function updateUI() {
        const t = translations[currentLang];
        document.getElementById('search').placeholder = t.search;
        document.getElementById('catTitleSI').innerText = currentLang === 'si' ? '‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∑è ‡∂Ø‡∑ì‡∂∏‡∑ä' : 'Featured Places';
        document.getElementById('listTitleSI').innerText = currentLang === 'si' ? '‡∑É‡∂Ç‡∂†‡∑è‡∂ª‡∂ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±' : 'Locations';
        
        ['n2','n3','c0','c1','c2','c3','c4'].forEach(id => {
            if(document.getElementById(id)) document.getElementById(id).innerText = t[id];
        });
        
        renderFeatured();
        render('all');
    }

    function renderFeatured() {
        const area = document.getElementById('featured-area');
        area.innerHTML = '';
        // Showing first 5 locations as featured
        locations.slice(0, 5).forEach(loc => {
            const card = document.createElement('div');
            card.className = 'featured-card';
            card.onclick = () => openDetails(loc.id);
            card.innerHTML = `
                <img src="${loc.img}">
                <div class="featured-overlay">
                    <div style="font-weight: bold;">${currentLang === 'si' ? loc.name_si : loc.name_en}</div>
                    <div style="font-size: 12px; opacity: 0.8;">üìç ${currentLang === 'si' ? loc.district_si : loc.district_en}</div>
                </div>
            `;
            area.appendChild(card);
        });
    }

    function render(cat) {
        currentCategory = cat;
        const grid = document.getElementById('location-grid');
        grid.innerHTML = '';
        
        let filtered = locations;
        if(cat !== 'all') filtered = locations.filter(l => l.cat === cat);

        filtered.forEach(loc => {
            const card = document.createElement('div');
            card.className = 'card';
            // Store data for searching
            card.setAttribute('data-name-si', loc.name_si.toLowerCase());
            card.setAttribute('data-name-en', loc.name_en.toLowerCase());
            card.setAttribute('data-dist-en', loc.district_en);
            
            card.innerHTML = `
                <img src="${loc.img}" loading="lazy">
                <div class="card-info">
                    <h3>${currentLang === 'si' ? loc.name_si : loc.name_en}</h3>
                    <p>üìç ${currentLang === 'si' ? loc.district_si : loc.district_en}</p>
                    <button class="view-btn" onclick="openDetails(${loc.id})">${translations[currentLang].view}</button>
                </div>
            `;
            grid.appendChild(card);
        });
        searchFn(); 
    }

    function searchFn() {
        let text = document.getElementById('search').value.toLowerCase();
        let dist = document.getElementById('districtFilter').value;
        let cards = document.getElementsByClassName('card');

        for (let card of cards) {
            let nameSi = card.getAttribute('data-name-si');
            let nameEn = card.getAttribute('data-name-en');
            let district = card.getAttribute('data-dist-en');

            let matchesSearch = nameSi.includes(text) || nameEn.includes(text);
            let matchesDist = (dist === 'all' || district === dist);

            if(matchesSearch && matchesDist) {
                card.style.display = "block";
            } else {
                card.style.display = "none";
            }
        }
    }

    function filterCat(cat, btn) {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        render(cat);
    }

    function openDetails(id) {
        const loc = locations.find(l => l.id === id);
        const t = translations[currentLang];
        document.getElementById('p-img').src = loc.img;
        document.getElementById('p-title').innerText = currentLang === 'si' ? loc.name_si : loc.name_en;
        document.getElementById('p-district').innerText = `üìç ${currentLang === 'si' ? loc.district_si : loc.district_en}`;
        document.getElementById('p-desc').innerText = currentLang === 'si' ? loc.desc_si : loc.desc_en;
        document.getElementById('p-reach').innerText = currentLang === 'si' ? loc.reach_si : loc.reach_en;
        document.getElementById('p-fee').innerText = currentLang === 'si' ? loc.fee_si : loc.fee_en;
        document.getElementById('p-best').innerText = currentLang === 'si' ? loc.best_si : loc.best_en;
        document.getElementById('p-do').innerText = currentLang === 'si' ? loc.do_si : loc.do_en;
        document.getElementById('p-police').innerText = loc.police;
        document.getElementById('p-map').href = `https://www.google.com/maps?q=${loc.lat},${loc.lon}`;
        document.getElementById('details-popup').style.display = "block";
    }

    function closePopups() {
        document.getElementById('details-popup').style.display = "none";
    }
</script>
</body>
</html>
