<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visit Sri Lanka Pro</title>
    <style>
        :root { --primary: #1a73e8; --secondary: #ff9f43; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background: var(--bg); color: #333; overflow-x: hidden; }
        
        /* Splash Screen */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a73e8; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 2000;
            color: white; text-align: center; transition: opacity 0.5s ease;
        }
        .splash-title { font-size: 32px; font-weight: bold; margin-bottom: 20px; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }
        .loader { width: 120px; height: 4px; background: rgba(255,255,255,0.3); border-radius: 10px; overflow: hidden; }
        .progress { width: 0%; height: 100%; background: white; transition: width 0.3s; }

        /* Header & Search */
        .header { background: white; padding: 20px 15px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .logo { font-size: 22px; font-weight: 800; color: var(--primary); }
        
        .search-container { position: relative; }
        .search-bar { 
            width: 100%; padding: 12px 15px 12px 45px; border-radius: 12px; 
            border: 1px solid #eee; background: #f1f3f4; font-size: 15px; outline: none; box-sizing: border-box;
        }
        .search-icon { position: absolute; left: 15px; top: 12px; color: #777; }

        /* DISTRICT FILTER STYLE - ‡∂±‡∑Ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ */
        .district-filter-select {
            width: 100%; margin-top: 10px; padding: 10px; border-radius: 10px;
            border: 1px solid #eee; background: #fff; font-size: 14px; outline: none;
        }

        /* Navigation Icons */
        .nav-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 10px 15px; scrollbar-width: none; }
        .nav-item { text-align: center; min-width: 65px; text-decoration: none; color: #555; font-size: 11px; }
        .nav-icon { width: 50px; height: 50px; background: white; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

        /* Featured Section */
        .featured-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 10px 15px; scrollbar-width: none; }
        .featured-card { min-width: 280px; height: 160px; border-radius: 20px; overflow: hidden; position: relative; }
        .featured-img { width: 100%; height: 100%; object-fit: cover; }
        .featured-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 40px 15px 15px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; }

        /* Categories */
        .section-title { padding: 15px 15px 5px; font-size: 16px; font-weight: bold; }
        .cat-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 10px 15px; scrollbar-width: none; }
        .cat-btn { padding: 8px 18px; background: white; border-radius: 20px; border: 1px solid #eee; white-space: nowrap; font-size: 13px; font-weight: 500; cursor: pointer; }
        .cat-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Location Cards */
        .grid { display: grid; grid-template-columns: 1fr; gap: 15px; padding: 15px; }
        .card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: relative; }
        .card-img { width: 100%; height: 200px; object-fit: cover; }
        .card-content { padding: 15px; }
        .card-tag { position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.6); color: white; padding: 5px 12px; border-radius: 12px; font-size: 11px; backdrop-filter: blur(5px); }
        .card h3 { margin: 0 0 5px; font-size: 17px; }
        .card p { margin: 0; font-size: 13px; color: #666; display: flex; align-items: center; gap: 5px; }

        /* Popup / Details */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1500; display: none; overflow-y: auto; }
        .details-header { position: relative; height: 300px; }
        .details-img { width: 100%; height: 100%; object-fit: cover; }
        .back-float { position: absolute; top: 20px; left: 20px; background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 10; cursor: pointer; }
        .details-body { padding: 25px; border-radius: 30px 30px 0 0; background: white; margin-top: -30px; position: relative; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .info-box { background: #f8f9fa; padding: 15px; border-radius: 15px; }
        .info-box span { display: block; font-size: 11px; color: #888; margin-bottom: 5px; }
        .info-box b { font-size: 13px; color: #333; }
        
        .map-btn { display: block; background: #1a73e8; color: white; text-align: center; padding: 15px; border-radius: 15px; text-decoration: none; margin-top: 25px; font-weight: bold; }
        
        #custom-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 25px; font-size: 13px; display: none; z-index: 3000; }
    </style>
</head>
<body>

    <div id="splash-screen">
        <div class="splash-title">Visit Sri Lanka<br><span style="font-size: 18px; opacity: 0.8;">‡∂Ö‡∂¥‡∑ö ‡∂Ω‡∂Ç‡∂ö‡∑è Guide</span></div>
        <div class="loader"><div class="progress" id="progress"></div></div>
    </div>

    <div class="header">
        <div class="top-bar">
            <div class="logo" id="title">Visit Sri Lanka üá±üá∞</div>
            <div onclick="toggleLang()" style="cursor: pointer; font-size: 14px; background: #eee; padding: 5px 12px; border-radius: 10px; font-weight: bold;" id="langBtn">EN</div>
        </div>
        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input type="text" id="search" class="search-bar" placeholder="‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±..." oninput="searchFn()">
            
            <select id="districtFilter" class="district-filter-select" onchange="searchFn()">
                <option value="all">‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∂Ø‡∑í‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ä‡∂ö (All Districts)</option>
                <option value="‡∂ö‡∑ú‡∑Ö‡∂π">‡∂ö‡∑ú‡∑Ö‡∂π (Colombo)</option>
                <option value="‡∂ú‡∂∏‡∑ä‡∂¥‡∑Ñ">‡∂ú‡∂∏‡∑ä‡∂¥‡∑Ñ (Gampaha)</option>
                <option value="‡∂ö‡∂Ω‡∑î‡∂≠‡∂ª">‡∂ö‡∂Ω‡∑î‡∂≠‡∂ª (Kalutara)</option>
            </select>
        </div>
    </div>

    <div class="nav-scroll">
        <a href="provinces.html" class="nav-item"><div class="nav-icon">üó∫Ô∏è</div><span>‡∂¥‡∑Ö‡∑è‡∂≠‡∑ä</span></a>
        <a href="weather.html" class="nav-item"><div class="nav-icon">üå§Ô∏è</div><span id="n3">‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´‡∂∫</span></a>
        <a href="currency.html" class="nav-item"><div class="nav-icon">üí∞</div><span id="n2">‡∂∏‡∑î‡∂Ø‡∂Ω‡∑ä</span></a>
        <a href="tel:119" class="nav-item"><div class="nav-icon" style="color: red;">üö®</div><span id="n1">‡∑Ñ‡∂Ø‡∑í‡∑É‡∑í</span></a>
    </div>

    <div class="section-title">‡∂¢‡∂±‡∂¥‡∑ä‚Äç‡∂ª‡∑í‡∂∫ ‡∑É‡∑ä‡∂Æ‡∑è‡∂±</div>
    <div id="featured-scroll" class="featured-scroll"></div>

    <div class="section-title" id="catTitleSI">‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∑Ä‡∂ª‡∑ä‡∂ú‡∑ì‡∂ö‡∂ª‡∂´‡∂∫</div>
    <div class="cat-scroll">
        <div class="cat-btn active" onclick="filterCat('all', this)" id="c0">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</div>
        <div class="cat-btn" onclick="filterCat('culture', this)" id="c1">üèõÔ∏è ‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∑ò‡∂≠‡∑í‡∂ö</div>
        <div class="cat-btn" onclick="filterCat('nature', this)" id="c2">‚õ∞Ô∏è ‡∑É‡∑ú‡∂∂‡∑è‡∂Ø‡∑Ñ‡∂∏</div>
        <div class="cat-btn" onclick="filterCat('beach', this)" id="c3">üèñÔ∏è ‡∑Ä‡∑ô‡∂ª‡∑Ö</div>
        <div class="cat-btn" onclick="filterCat('wildlife', this)" id="c4">üêò ‡∑Ä‡∂±‡∂¢‡∑ì‡∑Ä‡∑ì</div>
    </div>

    <div class="section-title" id="listTitleSI">‡∑É‡∂Ç‡∂†‡∑è‡∂ª‡∂ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±</div>
    <div id="location-grid" class="grid"></div>

    <div id="details-page" class="overlay">
        <div class="details-header">
            <div class="back-float" onclick="closePopups()">‚ùÆ</div>
            <img id="det-img" class="details-img" src="" alt="">
        </div>
        <div class="details-body">
            <h2 id="det-title" style="margin: 0 0 10px;"></h2>
            <p id="det-loc" style="color: #666; font-size: 14px; margin-bottom: 20px;"></p>
            
            <h4 id="det-about-label">‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ‡∂ú‡∑ê‡∂±:</h4>
            <p id="det-desc" style="line-height: 1.6; color: #444; font-size: 15px;"></p>

            <div class="info-grid">
                <div class="info-box"><span id="det-how-label">‡∂Ω‡∂ü‡∑è ‡∑Ä‡∂± ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫:</span><b id="det-reach"></b></div>
                <div class="info-box"><span id="det-fee-label">‡∂ú‡∑è‡∑É‡∑ä‡∂≠‡∑î:</span><b id="det-fee"></b></div>
                <div class="info-box"><span id="det-best-label">‡∑Ñ‡∑ú‡∂≥‡∂∏ ‡∂ö‡∑è‡∂Ω‡∂∫:</span><b id="det-best"></b></div>
                <div class="info-box"><span id="det-do-label">‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í ‡∂Ø‡∑ö:</span><b id="det-do"></b></div>
            </div>

            <div style="margin-top: 25px; padding: 15px; background: #fff5f5; border-radius: 15px; border: 1px solid #ffebeb;">
                <span style="font-size: 11px; color: #e74c3c; font-weight: bold;" id="det-contact-label">‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∂∫‡∑ö ‡∑Ñ‡∂Ø‡∑í‡∑É‡∑í ‡∂Ö‡∂Ç‡∂ö üìû</span>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                    <b id="det-police"></b>
                    <a id="det-call" href="" style="background: #e74c3c; color: white; padding: 5px 15px; border-radius: 10px; text-decoration: none; font-size: 12px;">Call Now</a>
                </div>
            </div>

            <a id="det-map" href="" target="_blank" class="map-btn">Google Map ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂∂‡∂Ω‡∂±‡∑ä‡∂± üìç</a>
        </div>
    </div>

    <div id="custom-toast"></div>

    <script> let locations = []; </script>
    <script src="translations.js"></script>
    <script src="western1.js"></script>
    <script src="western2.js"></script>
    <script src="western3.js"></script>
    <script src="western4.js"></script>

    <script>
        let currentLang = localStorage.getItem('lang') || 'si';

        window.onload = () => {
            let prog = document.getElementById('progress');
            let width = 0;
            let interval = setInterval(() => {
                width += 10;
                prog.style.width = width + '%';
                if(width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('splash-screen').style.opacity = '0';
                        setTimeout(() => { document.getElementById('splash-screen').style.display = 'none'; }, 500);
                    }, 300);
                }
            }, 100);
            updateUI();
        };

        function toggleLang() {
            currentLang = currentLang === 'si' ? 'en' : 'si';
            localStorage.setItem('lang', currentLang);
            updateUI();
        }

        function updateUI() {
            const t = translations[currentLang];
            document.getElementById('langBtn').innerText = currentLang === 'si' ? 'EN' : '‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω';
            document.getElementById('title').innerText = t.title;
            document.getElementById('search').placeholder = t.search;
            document.getElementById('catTitleSI').innerText = currentLang === 'si' ? '‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∑Ä‡∂ª‡∑ä‡∂ú‡∑ì‡∂ö‡∂ª‡∂´‡∂∫' : 'Explore Categories';
            document.getElementById('listTitleSI').innerText = currentLang === 'si' ? '‡∑É‡∂Ç‡∂†‡∑è‡∂ª‡∂ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±' : 'Nearby Locations';
            
            ['n1','n2','n3','c0','c1','c2','c3','c4'].forEach(id => {
                if(document.getElementById(id)) document.getElementById(id).innerText = t[id];
            });
            renderFeatured();
            render('all');
        }

        function renderFeatured() {
            const feat = document.getElementById('featured-scroll');
            feat.innerHTML = '';
            locations.slice(0, 5).forEach(loc => {
                const f = document.createElement('div');
                f.className = 'featured-card';
                f.onclick = () => openDetails(loc.id);
                f.innerHTML = `
                    <img class="featured-img" src="${loc.img}">
                    <div class="featured-overlay">
                        <div style="font-size: 14px; font-weight: bold;">${currentLang === 'si' ? loc.name_si : loc.name_en}</div>
                        <div style="font-size: 11px; opacity: 0.8;">üìç ${currentLang === 'si' ? loc.district_si : loc.district_en}</div>
                    </div>
                `;
                feat.appendChild(f);
            });
        }

        function render(category) {
            const grid = document.getElementById('location-grid');
            grid.innerHTML = '';
            let filtered = category === 'all' ? locations : locations.filter(l => l.cat === category);
            
            filtered.forEach(loc => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => openDetails(loc.id);
                card.innerHTML = `
                    <img class="card-img" src="${loc.img}" loading="lazy">
                    <div class="card-tag">${currentLang === 'si' ? loc.district_si : loc.district_en}</div>
                    <div class="card-content">
                        <h3>${currentLang === 'si' ? loc.name_si : loc.name_en}</h3>
                        <p>üìç ${currentLang === 'si' ? loc.district_si : loc.district_en}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ‡∂¥‡∑Ä‡∂≠‡∑í‡∂± searchFn ‡∂ë‡∂ö ‡∂∫‡∑è‡∑Ä‡∂≠‡∑ä‡∂ö‡∑è‡∂Ω‡∑ì‡∂± ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ (District Filter ‡∂ë‡∂ö ‡∑É‡∂∏‡∂ü)
        function searchFn() {
            let input = document.getElementById('search').value.toLowerCase();
            let districtInput = document.getElementById('districtFilter').value;
            let cards = document.getElementsByClassName('card');

            for (let i = 0; i < cards.length; i++) {
                let title = cards[i].getElementsByTagName('h3')[0].innerText.toLowerCase();
                let tagText = cards[i].getElementsByClassName('card-tag')[0].innerText; // ‡∂Ø‡∑í‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ä‡∂ö‡∂∫ card ‡∂ë‡∂ö‡∑ö ‡∂≠‡∑í‡∂∫‡∑ô‡∂±‡∑Ä‡∑è

                let matchName = title.includes(input);
                let matchDistrict = (districtInput === "all" || tagText === districtInput);

                if (matchName && matchDistrict) {
                    cards[i].style.display = "";
                } else {
                    cards[i].style.display = "none";
                }
            }
        }

        function filterCat(cat, btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            render(cat);
        }

        function openDetails(id) {
            const loc = locations.find(l => l.id === id);
            const t = translations[currentLang];
            
            document.getElementById('det-img').src = loc.img;
            document.getElementById('det-title').innerText = currentLang === 'si' ? loc.name_si : loc.name_en;
            document.getElementById('det-loc').innerText = "üìç " + (currentLang === 'si' ? loc.district_si : loc.district_en);
            document.getElementById('det-desc').innerText = currentLang === 'si' ? loc.desc_si : loc.desc_en;
            document.getElementById('det-reach').innerText = currentLang === 'si' ? loc.reach_si : loc.reach_en;
            document.getElementById('det-fee').innerText = currentLang === 'si' ? loc.fee_si : loc.fee_en;
            document.getElementById('det-best').innerText = currentLang === 'si' ? loc.best_si : loc.best_en;
            document.getElementById('det-do').innerText = currentLang === 'si' ? loc.do_si : loc.do_en;
            document.getElementById('det-police').innerText = "Police: " + loc.police;
            document.getElementById('det-call').href = "tel:" + loc.police;
            document.getElementById('det-map').href = `https://www.google.com/maps/search/?api=1&query=${loc.lat},${loc.lon}`;
            
            document.getElementById('det-about-label').innerText = t.about;
            document.getElementById('det-how-label').innerText = t.how;
            document.getElementById('det-contact-label').innerText = t.contact;
            document.getElementById('det-map').innerText = t.map;

            document.getElementById('details-page').style.display = "block";
            document.body.style.overflow = "hidden";
        }

        function closePopups() {
            document.getElementById('details-page').style.display = "none";
            document.body.style.overflow = "auto";
        }
    </script>
</body>
</html>
