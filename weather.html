<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRI LANKA WEATHER</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; width: 100%; max-width: 400px; padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
        .back-btn { background: #eee; border: none; padding: 10px 15px; border-radius: 10px; cursor: pointer; float: left; }
        select { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #ccc; margin: 20px 0; font-size: 16px; }
        .temp { font-size: 60px; font-weight: bold; color: #1a73e8; margin: 20px 0; }
        #status { font-weight: bold; color: #555; }
        .loader { display: none; color: blue; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <button class="back-btn" onclick="window.history.back()">‚¨ÖÔ∏è Back</button>
    <h2 style="margin-top:50px;">‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´ ‡∑Ä‡∑è‡∂ª‡∑ä‡∂≠‡∑è‡∑Ä</h2>

    <select id="district" onchange="getWeather()">
        <option value="6.9271,79.8612">‡∂ö‡∑ú‡∑Ö‡∂π (Colombo)</option>
        <option value="7.0840,80.0098">‡∂ú‡∂∏‡∑ä‡∂¥‡∑Ñ (Gampaha)</option>
        <option value="6.5854,79.9607">‡∂ö‡∂Ω‡∑î‡∂≠‡∂ª (Kalutara)</option>
        <option value="7.2906,80.6337">‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª (Kandy)</option>
        <option value="7.1895,80.4573">‡∂∏‡∑è‡∂≠‡∂Ω‡∑ö (Matale)</option>
        <option value="6.9497,80.7891">‡∂±‡∑î‡∑Ä‡∂ª‡∂ë‡∑Ö‡∑í‡∂∫ (Nuwara Eliya)</option>
        <option value="6.0367,80.2170">‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω (Galle)</option>
        <option value="5.9549,80.5550">‡∂∏‡∑è‡∂≠‡∂ª (Matara)</option>
        <option value="6.1245,81.1185">‡∑Ñ‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂≠‡∑ú‡∂ß (Hambantota)</option>
        <option value="9.6615,80.0255">‡∂∫‡∑è‡∂¥‡∂±‡∂∫ (Jaffna)</option>
        <option value="9.3803,80.3770">‡∑Ä‡∑Ä‡∑î‡∂±‡∑í‡∂∫‡∑è‡∑Ä (Vavuniya)</option>
        <option value="8.9810,80.2311">‡∂∏‡∂±‡∑ä‡∂±‡∑è‡∂ª‡∂∏ (Mannar)</option>
        <option value="9.3184,80.3982">‡∂∏‡∑î‡∂Ω‡∂≠‡∑í‡∑Ä‡∑ä (Mullaitivu)</option>
        <option value="9.4848,80.3982">‡∂ö‡∑í‡∂Ω‡∑í‡∂±‡∑ú‡∂†‡∑ä‡∂†‡∑í‡∂∫ (Kilinochchi)</option>
        <option value="7.7102,81.6924">‡∂∏‡∂©‡∂ö‡∂Ω‡∂¥‡∑î‡∑Ä (Batticaloa)</option>
        <option value="8.5874,81.2152">‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑î‡∂´‡∑è‡∂∏‡∂Ω‡∂∫ (Trincomalee)</option>
        <option value="7.4123,81.8242">‡∂Ö‡∂∏‡∑ä‡∂¥‡∑è‡∂ª (Ampara)</option>
        <option value="7.4817,80.3609">‡∂ö‡∑î‡∂ª‡∑î‡∂´‡∑ë‡∂ú‡∂Ω (Kurunegala)</option>
        <option value="7.9891,79.8453">‡∂¥‡∑î‡∂≠‡∑ä‡∂≠‡∂Ω‡∂∏ (Puttalam)</option>
        <option value="8.3114,80.4037">‡∂Ö‡∂±‡∑î‡∂ª‡∑è‡∂∞‡∂¥‡∑î‡∂ª‡∂∫ (Anuradhapura)</option>
        <option value="7.9403,81.0188">‡∂¥‡∑ú‡∑Ö‡∑ú‡∂±‡∑ä‡∂±‡∂ª‡∑î‡∑Ä (Polonnaruwa)</option>
        <option value="6.9895,81.0557">‡∂∂‡∂Ø‡∑î‡∂Ω‡∑ä‡∂Ω (Badulla)</option>
        <option value="6.8259,81.3392">‡∂∏‡∑ú‡∂´‡∂ª‡∑è‡∂ú‡∂Ω (Monaragala)</option>
        <option value="6.6828,80.3992">‡∂ª‡∂≠‡∑ä‡∂±‡∂¥‡∑î‡∂ª‡∂∫ (Ratnapura)</option>
        <option value="7.2513,80.3464">‡∂ö‡∑ë‡∂ú‡∂Ω‡∑ä‡∂Ω (Kegalle)</option>
    </select>

    <div id="loader" class="loader">‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂±‡∑í‡∂∏‡∑í‡∂±‡∑ä...</div>

    <div id="weatherData">
        <div class="temp" id="tempDisplay">--¬∞C</div>
        <div id="status">‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä...</div>
    </div>
</div>

<script>
    async function getWeather() {
        const district = document.getElementById('district');
        const coords = district.value.split(',');
        const loader = document.getElementById('loader');
        const weatherData = document.getElementById('weatherData');

        loader.style.display = "block";
        weatherData.style.opacity = "0.3";

        try {
            // ‡∂∏‡∑ô‡∂±‡∑ä‡∂± ‡∂∏‡∑ö Link ‡∂ë‡∂ö ‡∂î‡∂∂‡∑ö Browser ‡∂ë‡∂ö‡∑ö ‡∑Ä‡∑ê‡∂© ‡∂±‡∑ú‡∂ö‡∂Ω‡∂≠‡∑ä ‡∂ö‡∑ö‡∂≠‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∑ö ‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∂±‡∑î ‡∂á‡∂≠
            const apiLink = `https://api.open-meteo.com/1/v1/forecast?latitude=${coords[0]}&longitude=${coords[1]}&current_weather=true`;
            
            const response = await fetch(apiLink);
            const data = await response.json();

            if (data && data.current_weather) {
                document.getElementById('tempDisplay').innerText = Math.round(data.current_weather.temperature) + "¬∞C";
                document.getElementById('status').innerText = "‡∑É‡∂¢‡∑ì‡∑Ä‡∑ì ‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´‡∂∫ üå§Ô∏è";
            } else {
                document.getElementById('status').innerText = "‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö.";
            }
        } catch (error) {
            document.getElementById('status').innerText = "Internet Connection ‡∂ë‡∂ö ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.";
        } finally {
            loader.style.display = "none";
            weatherData.style.opacity = "1";
        }
    }

    // ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∑Ä‡∑ñ ‡∑Ä‡∑Ñ‡∑è‡∂∏ ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±
    window.onload = getWeather;
</script>

</body>
</html>
