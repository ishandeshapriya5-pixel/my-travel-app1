<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Island Weather - Sri Lanka</title>
    <style>
        :root { --primary: #1a73e8; --text: #333; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .weather-card { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 400px; position: relative; }
        
        .header-box { display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .back-btn { background: #eee; border: none; padding: 10px 15px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 14px; color: var(--text); }
        
        select { width: 100%; padding: 15px; border-radius: 15px; border: 2px solid #e0e0e0; font-size: 16px; margin-bottom: 20px; outline: none; background: #fff; cursor: pointer; font-weight: 500; }
        select:focus { border-color: var(--primary); }

        .weather-info { padding: 20px 0; }
        .temp-val { font-size: 65px; font-weight: bold; color: var(--primary); margin: 10px 0; }
        .location-label { font-size: 22px; font-weight: bold; color: #444; }
        .weather-status { background: #e8f0fe; color: var(--primary); display: inline-block; padding: 8px 20px; border-radius: 20px; font-size: 14px; font-weight: bold; margin-top: 10px; }
        
        .loading-overlay { display: none; color: var(--primary); font-weight: bold; margin: 10px 0; }
        .footer-note { font-size: 12px; color: #888; margin-top: 20px; line-height: 1.6; }
    </style>
</head>
<body>

<div class="weather-card">
    <div class="header-box">
        <button class="back-btn" onclick="goBack()">‚¨ÖÔ∏è Back</button>
        <h3 style="margin:0;">‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´ ‡∑Ä‡∑è‡∂ª‡∑ä‡∂≠‡∑è‡∑Ä</h3>
    </div>

    <label style="display:block; text-align:left; font-size:14px; margin-bottom:8px; color:#666; font-weight:bold;">‡∂Ø‡∑í‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ä‡∂ö‡∂∫ ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±:</label>
    <select id="districtSelect" onchange="fetchWeatherData()">
        <option value="6.9271,79.8612">‡∂ö‡∑ú‡∑Ö‡∂π (Colombo)</option>
        <option value="7.0840,80.0098">‡∂ú‡∂∏‡∑ä‡∂¥‡∑Ñ (Gampaha)</option>
        <option value="6.5854,79.9607">‡∂ö‡∂Ω‡∑î‡∂≠‡∂ª (Kalutara)</option>
        <option value="7.2906,80.6337">‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª (Kandy)</option>
        <option value="6.9497,80.7891">‡∂±‡∑î‡∑Ä‡∂ª‡∂ë‡∑Ö‡∑í‡∂∫ (Nuwara Eliya)</option>
        <option value="7.1895,80.4573">‡∂∏‡∑è‡∂≠‡∂Ω‡∑ö (Matale)</option>
        <option value="6.0367,80.2170">‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω (Galle)</option>
        <option value="5.9549,80.5550">‡∂∏‡∑è‡∂≠‡∂ª (Matara)</option>
        <option value="6.1245,81.1185">‡∑Ñ‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂≠‡∑ú‡∂ß (Hambantota)</option>
        <option value="9.6615,80.0255">‡∂∫‡∑è‡∂¥‡∂±‡∂∫ (Jaffna)</option>
        <option value="9.3803,80.3770">‡∑Ä‡∑Ä‡∑î‡∂±‡∑í‡∂∫‡∑è‡∑Ä (Vavuniya)</option>
        <option value="8.9810,80.2311">‡∂∏‡∂±‡∑ä‡∂±‡∑è‡∂ª‡∂∏ (Mannar)</option>
        <option value="9.3184,80.3982">‡∂∏‡∑î‡∂Ω‡∂≠‡∑í‡∑Ä‡∑ä (Mullaitivu)</option>
        <option value="9.4848,80.3982">‡∂ö‡∑í‡∂Ω‡∑í‡∂±‡∑ú‡∂†‡∑ä‡∂†‡∑í‡∂∫ (Kilinochchi)</option>
        <option value="7.7102,81.6924">‡∂∏‡∂©‡∂ö‡∂Ω‡∂¥‡∑î‡∑Ä (Batticaloa)</option>
        <option value="8.5874,81.2152">‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑î‡∂´‡∑è‡∂∏‡∂Ω‡∂∫ (Trincomalee)</option>
        <option value="7.4123,81.8242">‡∂Ö‡∂∏‡∑ä‡∂¥‡∑è‡∂ª (Ampara)</option>
        <option value="7.4817,80.3609">‡∂ö‡∑î‡∂ª‡∑î‡∂´‡∑ë‡∂ú‡∂Ω (Kurunegala)</option>
        <option value="7.9891,79.8453">‡∂¥‡∑î‡∂≠‡∑ä‡∂≠‡∂Ω‡∂∏ (Puttalam)</option>
        <option value="8.3114,80.4037">‡∂Ö‡∂±‡∑î‡∂ª‡∑è‡∂∞‡∂¥‡∑î‡∂ª‡∂∫ (Anuradhapura)</option>
        <option value="7.9403,81.0188">‡∂¥‡∑ú‡∑Ö‡∑ú‡∂±‡∑ä‡∂±‡∂ª‡∑î‡∑Ä (Polonnaruwa)</option>
        <option value="6.9895,81.0557">‡∂∂‡∂Ø‡∑î‡∂Ω‡∑ä‡∂Ω (Badulla)</option>
        <option value="6.8259,81.3392">‡∂∏‡∑ú‡∂´‡∂ª‡∑è‡∂ú‡∂Ω (Monaragala)</option>
        <option value="6.6828,80.3992">‡∂ª‡∂≠‡∑ä‡∂±‡∂¥‡∑î‡∂ª‡∂∫ (Ratnapura)</option>
        <option value="7.2513,80.3464">‡∂ö‡∑ë‡∂ú‡∂Ω‡∑ä‡∂Ω (Kegalle)</option>
    </select>

    <div id="loader" class="loading-overlay">‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂±‡∑í‡∂∏‡∑í‡∂±‡∑ä...</div>

    <div class="weather-info" id="contentArea">
        <div class="location-label" id="cityName">Colombo</div>
        <div class="temp-val" id="tempDisplay">--¬∞C</div>
        <div class="weather-status" id="weatherStatus">‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä...</div>
        <div class="footer-note" id="updateTime"></div>
    </div>
</div>

<script>
    // App ‡∂ë‡∂ö refresh ‡∂±‡∑ú‡∑Ä‡∑ì ‡∂≠‡∑í‡∂∂‡∑ì‡∂∏‡∂ß index.html ‡∑Ä‡∑ô‡∂≠ ‡∂∫‡∂± ‡∂ö‡∑ä‚Äç‡∂ª‡∂∏‡∂∫
    function goBack() {
        if (window.history.length > 1) {
            window.history.back();
        } else {
            window.location.href = "index.html";
        }
    }

    async function fetchWeatherData() {
        const loader = document.getElementById('loader');
        const content = document.getElementById('contentArea');
        const select = document.getElementById('districtSelect');
        
        const coords = select.value.split(',');
        const name = select.options[select.selectedIndex].text;

        loader.style.display = 'block';
        content.style.opacity = '0.5';

        try {
            // ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í API Link ‡∂ë‡∂ö
            const url = `https://api.open-meteo.com/1/v1/forecast?latitude=${coords[0]}&longitude=${coords[1]}&current_weather=true&timezone=auto`;
            const response = await fetch(url);
            const data = await response.json();

            if (data.current_weather) {
                const temp = Math.round(data.current_weather.temperature);
                document.getElementById('tempDisplay').innerText = temp + "¬∞C";
                document.getElementById('cityName').innerText = name.split(' ')[0];
                document.getElementById('weatherStatus').innerText = "‡∑É‡∂¢‡∑ì‡∑Ä‡∑ì ‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´‡∂∫ üå§Ô∏è";
                
                const now = new Date();
                document.getElementById('updateTime').innerText = "‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∑Ä‡∂ª‡∂ß ‡∂∫‡∑è‡∑Ä‡∂≠‡∑ä‡∂ö‡∑è‡∂Ω‡∑ì‡∂± ‡∂ö‡∑Ö‡∑ö: " + now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');
            }
        } catch (error) {
            document.getElementById('weatherStatus').innerText = "‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö";
            console.error("Weather Error:", error);
        } finally {
            loader.style.display = 'none';
            content.style.opacity = '1';
        }
    }

    // ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä Load ‡∑Ä‡∑ñ ‡∑Ä‡∑í‡∂ú‡∑É ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑Ä‡∑ì‡∂∏‡∂ß
    window.onload = fetchWeatherData;
</script>

</body>
</html>
