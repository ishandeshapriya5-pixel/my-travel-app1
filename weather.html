<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRI LANKA WEATHER LIVE</title>
    <style>
        :root { --blue: #1a73e8; }
        body { font-family: 'Segoe UI', sans-serif; background: #eef2f7; margin: 0; padding: 15px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 380px; padding: 25px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); text-align: center; margin-top: 20px; }
        .back-nav { display: flex; align-items: center; margin-bottom: 20px; cursor: pointer; color: var(--blue); font-weight: bold; border: none; background: none; }
        select { width: 100%; padding: 15px; border-radius: 15px; border: 2px solid #ddd; font-size: 16px; margin: 15px 0; outline: none; -webkit-appearance: none; }
        .temp-circle { width: 150px; height: 150px; border: 8px solid #f0f4f8; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 20px auto; font-size: 45px; font-weight: bold; color: var(--blue); }
        .loading { font-weight: bold; color: #ff9f43; display: none; }
        .error-msg { color: red; font-size: 14px; display: none; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <button class="back-nav" onclick="window.history.back()">‚¨ÖÔ∏è Back to Home</button>
    <h2 style="margin:0;">‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´‡∂∫</h2>
    
    <select id="cityBox" onchange="getLiveWeather()">
        <option value="6.9271,79.8612">‡∂ö‡∑ú‡∑Ö‡∂π (Colombo)</option>
        <option value="7.2906,80.6337">‡∂∏‡∑Ñ‡∂±‡∑î‡∑Ä‡∂ª (Kandy)</option>
        <option value="6.0367,80.2170">‡∂ú‡∑è‡∂Ω‡∑ä‡∂Ω (Galle)</option>
        <option value="8.3114,80.4037">‡∂Ö‡∂±‡∑î‡∂ª‡∑è‡∂∞‡∂¥‡∑î‡∂ª‡∂∫ (Anuradhapura)</option>
        <option value="9.6615,80.0255">‡∂∫‡∑è‡∂¥‡∂±‡∂∫ (Jaffna)</option>
        <option value="6.9497,80.7891">‡∂±‡∑î‡∑Ä‡∂ª‡∂ë‡∑Ö‡∑í‡∂∫ (Nuwara Eliya)</option>
        <option value="8.5874,81.2152">‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑î‡∂´‡∑è‡∂∏‡∂Ω‡∂∫ (Trincomalee)</option>
        <option value="7.7102,81.6924">‡∂∏‡∂©‡∂ö‡∂Ω‡∂¥‡∑î‡∑Ä (Batticaloa)</option>
        <option value="6.6828,80.3992">‡∂ª‡∂≠‡∑ä‡∂±‡∂¥‡∑î‡∂ª‡∂∫ (Ratnapura)</option>
        <option value="7.4817,80.3609">‡∂ö‡∑î‡∂ª‡∑î‡∂´‡∑ë‡∂ú‡∂Ω (Kurunegala)</option>
        <option value="6.1245,81.1185">‡∑Ñ‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂≠‡∑ú‡∂ß (Hambantota)</option>
        <option value="7.9891,79.8453">‡∂¥‡∑î‡∂≠‡∑ä‡∂≠‡∂Ω‡∂∏ (Puttalam)</option>
        <option value="6.9895,81.0557">‡∂∂‡∂Ø‡∑î‡∂Ω‡∑ä‡∂Ω (Badulla)</option>
        <option value="7.0840,80.0098">‡∂ú‡∂∏‡∑ä‡∂¥‡∑Ñ (Gampaha)</option>
        <option value="6.5854,79.9607">‡∂ö‡∂Ω‡∑î‡∂≠‡∂ª (Kalutara)</option>
        <option value="7.1895,80.4573">‡∂∏‡∑è‡∂≠‡∂Ω‡∑ö (Matale)</option>
        <option value="5.9549,80.5550">‡∂∏‡∑è‡∂≠‡∂ª (Matara)</option>
        <option value="9.3803,80.3770">‡∑Ä‡∑Ä‡∑î‡∂±‡∑í‡∂∫‡∑è‡∑Ä (Vavuniya)</option>
        <option value="8.9810,80.2311">‡∂∏‡∂±‡∑ä‡∂±‡∑è‡∂ª‡∂∏ (Mannar)</option>
        <option value="9.3184,80.3982">‡∂∏‡∑î‡∂Ω‡∂≠‡∑í‡∑Ä‡∑ä (Mullaitivu)</option>
        <option value="9.4848,80.3982">‡∂ö‡∑í‡∂Ω‡∑í‡∂±‡∑ú‡∂†‡∑ä‡∂†‡∑í‡∂∫ (Kilinochchi)</option>
        <option value="7.4123,81.8242">‡∂Ö‡∂∏‡∑ä‡∂¥‡∑è‡∂ª (Ampara)</option>
        <option value="7.9403,81.0188">‡∂¥‡∑ú‡∑Ö‡∑ú‡∂±‡∑ä‡∂±‡∂ª‡∑î‡∑Ä (Polonnaruwa)</option>
        <option value="6.8259,81.3392">‡∂∏‡∑ú‡∂´‡∂ª‡∑è‡∂ú‡∂Ω (Monaragala)</option>
        <option value="7.2513,80.3464">‡∂ö‡∑ë‡∂ú‡∂Ω‡∑ä‡∂Ω (Kegalle)</option>
    </select>

    <div id="loader" class="loading">‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂±‡∑í‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</div>

    <div id="displayArea">
        <div class="temp-circle" id="tempText">--¬∞C</div>
        <h3 id="cityName" style="margin:5px 0;">‡∂ö‡∑ú‡∑Ö‡∂π</h3>
        <p id="weatherStat" style="color:#666;">‡∑É‡∂¢‡∑ì‡∑Ä‡∑ì ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä</p>
    </div>
    
    <div id="errorArea" class="error-msg">‚ö†Ô∏è ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</div>
</div>

<script>
    async function getLiveWeather() {
        const cityBox = document.getElementById('cityBox');
        const loader = document.getElementById('loader');
        const errorArea = document.getElementById('errorArea');
        const coords = cityBox.value.split(',');
        const name = cityBox.options[cityBox.selectedIndex].text.split(' ')[0];

        // UI ‡∑É‡∂ö‡∑É‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
        loader.style.display = 'block';
        errorArea.style.display = 'none';

        try {
            // API ‡∑Ä‡∑ô‡∂≠‡∑í‡∂±‡∑ä ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏
            const response = await fetch(`https://api.open-meteo.com/1/v1/forecast?latitude=${coords[0]}&longitude=${coords[1]}&current_weather=true`);
            
            if (!response.ok) throw new Error('Network error');

            const data = await response.json();
            const temperature = Math.round(data.current_weather.temperature);

            // ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
            document.getElementById('tempText').innerText = temperature + "¬∞C";
            document.getElementById('cityName').innerText = name;
            document.getElementById('weatherStat').innerText = "‡∂¥‡∑Ä‡∂≠‡∑í‡∂± ‡∂ã‡∑Ç‡∑ä‡∂´‡∂≠‡∑ä‡∑Ä‡∂∫ üå§Ô∏è";
            
        } catch (err) {
            console.error(err);
            errorArea.style.display = 'block';
            document.getElementById('tempText').innerText = "--";
        } finally {
            loader.style.display = 'none';
        }
    }

    // ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∑Ä‡∑ñ ‡∑Ä‡∑Ñ‡∑è‡∂∏ ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
    window.onload = getLiveWeather;
</script>

</body>
</html>
